# Background Extraction Process Implementation

## Objective
Convert the existing synchronous extraction workflow into an asynchronous background process that allows users to navigate the app while extraction runs.

## Core Requirements

### User Flow Changes
1. **Start Extraction Button**: When clicked, immediately redirect user to 'All Sessions' view
2. **Session Creation**: Create new session with status 'Processing' in the sessions list
3. **Background Execution**: Run entire extraction pipeline asynchronously without user interaction
4. **No Schema View**: Eliminate any intermediate redirects or user input requirements

### Background Process Workflow
Execute the following steps asynchronously after 'Start Extraction' is clicked:

1. **Document Processing**: Use existing extraction logic for PDF, Word, and Excel files
2. **AI Prompt Assembly**: Combine document content with existing schema, rules, and knowledge documents  
3. **AI API Call**: Send assembled prompt to AI service using current endpoint
4. **Response Processing**: Parse returned JSON using existing validation logic
5. **Field Validation**: Apply current validation rules to extracted data
6. **Session Update**: Change status from 'Processing' to 'In Progress' upon completion
7. **Error Handling**: Set status to 'Failed' if any step encounters errors

### Technical Implementation Requirements

- **Reuse Existing Code**: Do not create new extraction, validation, or AI prompt logic
- **Async Execution**: Implement using background jobs/workers or async functions
- **Status Updates**: Update session status in real-time for user visibility
- **Error Recovery**: Handle failures gracefully with appropriate status updates
- **Progress Tracking**: Optional - show extraction progress if feasible

### Session Status States
- **Processing**: Extraction pipeline running in background
- **In Progress**: Extraction completed successfully, ready for user review
- **Failed**: Extraction encountered errors (with error details)

### Success Criteria
- User can start extraction and immediately navigate to other app sections
- Extraction runs completely in background without user intervention
- Session appears in 'All Sessions' with appropriate status updates
- All existing extraction quality and validation standards maintained
- No new business logic required - pure architectural change to async processing